# InnoDB 스토리지 엔진 아키텍처

<p align="center">
  <img src="https://user-images.githubusercontent.com/76584547/165796961-8d9664de-8d05-4db2-b15f-a6d1f14f4b73.png">
</p>

+ InnoDB는 MySQL에서 사용할 수 있는 스토리지 엔진 중 거의 유일하게 `레코드 기반의 잠금`을 제공하며
+ 이 때문에 `높은 동시성 처리`가 가능하고 안정적이며 성능이 뛰어나다

## 클러스터링 인덱스
### InnoDB
+ InnoDB의 모든 테이블은 기본적으로 프라이머리 키를 기준으로 클러스터링되어 저장
+ 즉, `프라이머리 키 값의 순서대로 디스크에 저장`된다는 뜻
+ 모든 `세컨더리 인덱스는 레코드의 주소 대신 프라이머리 키의 값을 논리적인 주소로 사용`
+ 프라이머리 키가 클러스터링 인덱스이기 때문에 프라이머리 키를 이용한 `레인지 스캔`은 상당히 빠르게 처리

### MyISAM
+ MyISAM 스토리지 엔진에서는 `클러스터링 키를 지원하지 않는다`
+ 그래서 MyISAM 스토리지 엔진에서는 프라이머리 키와 세컨더리 인덱스는 구조적으로 아무런 차이가 없다
+ 프라이머리 키는 그냥 유니크 제약을 가진 세컨더리 인덱스일 뿐이다.
+ `프라이머리 키를 포함한 모든 인덱스는 물리적인 레코드의 주소값을 가진다`

## 외래키 지원
+ 외래키에 대한 지원은 `InnoDB` 가능, `MyISAM`이나 `MEMORY`테이블 불가능
+ 변경시에 반드시 부모 테이블이나 자식 테이블에 데이터가 있는지 체크하는 작업이 필요하므로 `락이 여러 테이블로 전파`되며, `그로인한 데드락이 발생`

## MVCC (Multi Version Concurrency Control)
+ 레코드 레벨의 트랜잭션을 지원하는 DBMS가 제공하는 기능
+ MVCC의 가장 큰 목적은 `락을 사용하지 않는 일관된 읽기를 제공`하는 데 있다
